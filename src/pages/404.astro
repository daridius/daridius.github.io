---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Redirecting...">
    <div
        style="height: 100vh; background: #0b141a; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: sans-serif;"
    >
        <div class="loader"></div>
        <p style="margin-top: 20px; color: #8696a0;">
            Preparing your Wrapped...
        </p>
    </div>
</Layout>

<script>
    function tryRedirect() {
        const path = window.location.pathname;
        const hash = path.startsWith("/") ? path.substring(1) : path;

        // If it looks like a hash (long string of alphanumeric + symbols)
        if (hash.length > 20) {
            console.log("Looks like a hash, redirecting to viewer...");
            window.location.href = "/v#" + hash;
        } else {
            // Real 404
            window.location.href = "/";
        }
    }

    tryRedirect();
</script>

<style>
    .loader {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(37, 211, 102, 0.1);
        border-radius: 50%;
        border-top-color: #25d366;
        animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
</style>
